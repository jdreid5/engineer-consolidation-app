export const jobQueueCore = { title: "Implementing the Job Queue", duration: "35 minutes", content: "## Job Entity\n\n```javascript\n// src/domain/entities/Job.js\nclass Job {\n  constructor({ id, type, payload, status, attempts, userId, createdAt }) {\n    this.id = id;\n    this.type = type;\n    this.payload = payload;\n    this.status = status || 'pending';\n    this.attempts = attempts || 0;\n    this.userId = userId;\n    this.createdAt = createdAt || new Date();\n  }\n  \n  static create({ type, payload, userId }) {\n    return new Job({\n      id: generateId(),\n      type,\n      payload,\n      userId\n    });\n  }\n  \n  markProcessing() { this.status = 'processing'; }\n  markComplete() { this.status = 'completed'; }\n  markFailed(error) {\n    this.status = 'failed';\n    this.error = error;\n  }\n  incrementAttempts() { this.attempts++; }\n}\n```\n\n## Queue Service\n\n```javascript\n// src/infrastructure/queue/QueueService.js\nconst Queue = require('bull');\n\nclass QueueService {\n  constructor(redisConfig) {\n    this.queues = {};\n    this.redisConfig = redisConfig;\n  }\n  \n  getQueue(name) {\n    if (!this.queues[name]) {\n      this.queues[name] = new Queue(name, { redis: this.redisConfig });\n    }\n    return this.queues[name];\n  }\n  \n  async addJob(queueName, jobData, options = {}) {\n    const queue = this.getQueue(queueName);\n    return queue.add(jobData, {\n      attempts: options.attempts || 3,\n      backoff: { type: 'exponential', delay: 1000 },\n      ...options\n    });\n  }\n}\n```\n\n## Job Submission Use Case\n\n```javascript\nclass SubmitJobUseCase {\n  constructor(jobRepository, queueService) {\n    this.jobRepository = jobRepository;\n    this.queueService = queueService;\n  }\n  \n  async execute({ type, payload, userId }) {\n    const job = Job.create({ type, payload, userId });\n    await this.jobRepository.save(job);\n    await this.queueService.addJob(type, { jobId: job.id });\n    return job;\n  }\n}\n```", quiz: [{ question: "Why store jobs in both the database AND the queue?", options: ["For redundancy", "Database for history/querying, queue for processing order", "It's required by Redis", "For performance"], correctAnswer: 1, explanation: "The database stores job records for querying and history. The queue handles the processing order and worker distribution. They serve different purposes." }] };


